var CA;var CP_DIR="muchakoslot/";var BACK_TO_CP_TEXT="回して！答えて！お題スロット";var HASH_TITLE="回して答えてお題スロット";var ENTRY_TITLE="ムチャブリお題に参加中";var MISTRAL_URL="http://lo.ameba.jp/v1/yZYfRdEgpGtjYbamvGmM";
var CPN_STAMP_STAT="http://stat100.ameba.jp/blog/img/lp/"+CP_DIR;var CMN_EDIT_URL="http://blog.ameba.jp/ucs/entry/srventryinsertinput.do";var ENTRY_TITLE_OPTION="?entry_title=";
var ENTRY_TEXT_OPTION="&entry_text=";var HASH_OPTION="&hashtag=";var $TEXT_BOX=$(textBox);var $SLOT_BUTTON=$(".u-rouletteButton");var DELAY=200;var ACCELE=4;
var DECELE=1.4;var ACCELE_ADD=150;var DECELE_ADD=10;var FLAME_HEIGHT=250;var MUCHAKO_IMG=10;var defense=false;var slotCnt=[];var boxbox;function slotMacine(c,b){var a=this;
this.word=c;this.speed=b;a._init();}slotMacine.prototype={_init:function(){var a=this;if(!a.word){console.log("error..");return false;}a._shuffle(a.word);
a._count();},_count:function(){var a=this;a._render(b(a.word));function b(d){var c=[];c+='<div class="u-rouletteBox"><ul>';$.each($(d),function(e,f){c+='<li class="u-rouletteBox__list"><span>'+f+"</span></li>";
});c+="</ul></div>";return c;}},_render:function(b){var a=this;$(".u-roulette").append(b);a._move(true);},_shuffle:function(d){var a=d.length,c,b;while(a){b=Math.floor(Math.random()*a--);
c=d[a];d[a]=d[b];d[b]=c;}return a;},_move:function(a){var b=this;rotation=function(c){var d=$(".u-rouletteBox").eq(c.speed.num);var e=d.find("li:first").clone(true);
d.find("li:first").animate({marginTop:"-"+FLAME_HEIGHT+"px"},{duration:c.speed.delay,easing:"linear",complete:function(){d.find("li:first").remove();e.clone(true).insertAfter(d.find("li:last"));
if(!a){if(c.speed.delay>DECELE_ADD){clearInterval(slotCnt.shift());if(slotCnt.length==0){slotCnt.length=0;$(".u-slotbtn__Start").css("display","none");
$(".u-slotbtn__Retry").css("display","inline-block");$(".u-slotbtn__Def").css("display","none");$(".u-slotbtn__Active").css("display","inline-block");defense=false;
c._theme();}}else{c.speed.delay=c.speed.delay*c.speed.decele;}}else{if(c.speed.delay>ACCELE_ADD){c.speed.delay=c.speed.delay/c.speed.accele;}else{c.speed.delay=ACCELE_ADD;
$(".u-slotbtn__Start").css("display","inline-block");$(".u-slotbtn__Retry").css("display","none");$(".u-slotbtn__Def").css("display","inline-block");$(".u-slotbtn__Active").css("display","none");
}}}});};slotCnt.push(boxbox=setInterval(function(){rotation(b);},0));},_theme:function(){var b=this;var a=[];$(".u-rouletteBox").each(function(){a.push($(this).find("li:first").text());
});b._muchako(a);},_muchako:function(c){var b=this;var a=Math.floor(Math.random()*(MUCHAKO_IMG+1-1))+1;if(a<10){a="0"+a+".png";}else{a=a+".png";}b._editUrl(a,c);
},_encode:function(b){var a=this;return encodeURIComponent(b);},_editUrl:function(e,g){var c=this;var b={url:CPN_STAMP_STAT+e,theme:g,wd:"220",ht:"360"};
var d={url:CMN_EDIT_URL,backCpthemeUrl:"<div>********************<br><span>"+b.theme[0]+"</span><br><span>"+b.theme[1]+"</span><br><span>"+b.theme[2]+"</span><br>********************<br><br><br></div>",backCpBnrUrl:'<div><a href="'+MISTRAL_URL+'" target="_blank"><img src="'+b.url+'" width="'+b.wd+' "></a></div>',backCpTxtUrl:'<div><a href="'+MISTRAL_URL+'" target="_blank"><img src="'+CPN_STAMP_STAT+'card_bnr.png" alt="'+BACK_TO_CP_TEXT+'" width="'+b.wd+' "></a><br><br><br></div>',};
var a=c._encode(d.backCpthemeUrl+d.backCpBnrUrl+d.backCpTxtUrl);function f(k){var j=ENTRY_TITLE_OPTION+c._encode("「"+b.theme[0]+b.theme[1]+b.theme[2]+"」に答えてみた");
var i=ENTRY_TEXT_OPTION+c._encode("<p>"+ENTRY_TITLE+"</p>");var h=d.url+j+i+a+HASH_OPTION+c._encode(HASH_TITLE);$("#blog").attr("href",h);}f();},_scroll:function(){$(window).scroll(function(b){var d=$(b.currentTarget),a=d.scrollTop(),c=$(".sb-summary").offset();
if(a>(c.top*0.8)){$(".u-muchako--a").addClass("u-muchako--a-escape");$(".u-muchako--b").addClass("u-muchako--b-escape");}else{$(".u-muchako--a").removeClass("u-muchako--a-escape");
$(".u-muchako--b").removeClass("u-muchako--b-escape");}});},_button:function(){$SLOT_BUTTON.find("li").on("click",function(){var a=$(this).attr("class");
switch(a){case"u-slotbtn__Start":if(!defense){defense=true;CA._move(false);}break;case"u-slotbtn__Retry":if(!defense){start();}break;}});}};function start(){CA="";
$(".u-roulette").html("");$.each($TEXT_BOX,function(a,b){CA=new slotMacine(b,{delay:DELAY*(a+1),accele:ACCELE,decele:DECELE,num:a});if($TEXT_BOX.length-1==a){$(".u-slotbtn__Def").css("display","inline-block");
$(".u-slotbtn__Active").css("display","none");}});}$SLOT_BUTTON.find("li").on("click",function(){var a=$(this).attr("class");switch(a){case"u-slotbtn__Start":if(!defense){defense=true;
CA._move(false);}break;case"u-slotbtn__Retry":if(!defense){start();}break;}});